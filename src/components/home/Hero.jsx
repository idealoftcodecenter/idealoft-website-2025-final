'use client';

import { useEffect, useState, useRef } from 'react';
import gsap from 'gsap';

export default function Hero() {
    const [scrollEnabled, setScrollEnabled] = useState(false);
    const heroRef = useRef(null);
	const stickersRef = useRef(null);

    useEffect(() => {
        document.body.style.overflow = 'hidden';

        const handleScrollTrigger = (e) => {
            if (!scrollEnabled) {
                e.preventDefault();
                gsap.to(".mask-layer", {
					clipPath: "polygon(100% 0%, 100% 0%, 100% 0%, 100% 0%)", // collapse to top-right
					duration: 2,
					ease: "power2.inOut",
                    onComplete: () => {
                        document.body.style.overflow = 'auto';
                        setScrollEnabled(true);
                        window.removeEventListener('wheel', handleScrollTrigger, { passive: false });
                    },
                });
            }
        };

        window.addEventListener('wheel', handleScrollTrigger, { passive: false });
		window.addEventListener('touchmove', handleScrollTrigger, { passive: false });


        return () => {
            window.removeEventListener('wheel', handleScrollTrigger);
        };
    }, [scrollEnabled]);

	// useEffect(() => {
	// 	const stickers = stickersRef.current;
	// 	if (!stickers) return;
	// 	const stickerElements = stickers.querySelectorAll('.sticker');

	// 	if ('ontouchstart' in window) {
	// 		stickers.classList.add('touch');

	// 		stickerElements.forEach(sticker => {
	// 			sticker.addEventListener('click', () => {
	// 				stickerElements.forEach(s => s.classList.remove('peeled'));
	// 				sticker.classList.add('peeled');
	// 			});
	// 		});

	// 		// Optional: Clean up event listeners on unmount
	// 		return () => {
	// 			stickerElements.forEach(sticker => {
	// 				sticker.removeEventListener('click', () => {});
	// 			});
	// 		};
	// 	} else {
	// 		stickers.classList.add('hover');
	// 	}
	// }, []);

    return (
        <section className="hero" style={{ height: 'calc(var(--spacing-unit) * 18)' }}>
			<div className="sticker relative w-full h-full">
				<div className="sticker-front w-full h-full flex items-center justify-center bg-[rgba(248,248,248,.4)]">
					<div className="mask-layer"></div>
					<svg width="2722" height="1357" viewBox="0 0 2722 1357" fill="none" xmlns="http://www.w3.org/2000/svg" style={{ height: "calc(var(--spacing-unit) * 14)" }}>
						<path d="M0 1347.11V734.352H155.08C208.539 734.352 250.146 741.162 279.902 754.782C309.657 767.892 330.587 788.822 342.69 817.572C354.794 845.812 360.846 882.632 360.846 928.022V1150.42C360.846 1196.32 354.794 1233.89 342.69 1263.14C330.587 1291.89 309.657 1313.07 279.902 1326.69C250.651 1340.3 209.548 1347.11 156.593 1347.11H0ZM135.412 1253.31H156.593C177.271 1253.31 192.148 1250.28 201.226 1244.23C210.304 1238.18 215.852 1229.1 217.869 1217C220.391 1204.89 221.652 1189.76 221.652 1171.61V904.562C221.652 886.412 220.139 871.782 217.113 860.692C214.591 849.592 208.791 841.522 199.713 836.482C190.635 831.442 176.01 828.922 155.837 828.922H135.412V1253.31Z" fill="black"/>
						<path d="M372.572 1347.11V734.352H647.935V826.652H507.984V978.702H614.649V1072.51H507.984V1255.58H649.448V1347.11H372.572Z" fill="black"/>
						<path d="M822.691 1356.19C784.362 1356.19 752.337 1349.38 726.617 1335.76C700.896 1322.15 681.479 1301.22 668.367 1272.98C655.254 1244.23 647.942 1207.16 646.429 1161.77L762.172 1144.37C762.676 1170.6 764.946 1191.78 768.98 1207.92C773.519 1224.06 779.571 1235.66 787.136 1242.72C795.205 1249.78 804.788 1253.31 815.883 1253.31C830.004 1253.31 839.082 1248.52 843.117 1238.93C847.655 1229.35 849.925 1219.27 849.925 1208.67C849.925 1183.46 843.873 1162.28 831.769 1145.13C819.665 1127.48 803.275 1109.83 782.597 1092.17L729.643 1046.03C706.444 1026.36 686.775 1004.17 670.636 979.461C655.002 954.241 647.185 923.221 647.185 886.411C647.185 834.461 662.567 794.871 693.331 767.641C724.095 739.901 765.954 726.031 818.909 726.031C851.69 726.031 877.911 731.581 897.581 742.681C917.761 753.771 932.891 768.401 942.971 786.551C953.561 804.201 960.621 823.121 964.151 843.291C968.191 862.961 970.461 881.871 970.961 900.031L854.464 914.401C853.96 896.241 852.699 880.611 850.681 867.501C849.168 853.881 845.638 843.541 840.091 836.481C834.543 828.921 825.969 825.131 814.37 825.131C801.762 825.131 792.432 830.431 786.38 841.021C780.832 851.611 778.058 862.201 778.058 872.791C778.058 895.491 783.354 914.151 793.945 928.771C805.04 942.891 819.413 957.771 837.065 973.411L887.751 1018.04C914.481 1040.73 936.921 1066.45 955.081 1095.2C973.741 1123.95 983.071 1159.5 983.071 1201.87C983.071 1230.61 976.511 1256.84 963.401 1280.54C950.291 1303.74 931.631 1322.15 907.421 1335.76C883.711 1349.38 855.473 1356.19 822.691 1356.19Z" fill="black"/>
						<path d="M969.061 1347.11V734.352H1104.47V1347.11H969.061Z" fill="black"/>
						<path d="M1279.23 1356.19C1236.87 1356.19 1203.33 1347.36 1178.62 1329.71C1154.41 1312.06 1137.01 1287.35 1126.42 1255.58C1116.34 1223.3 1111.29 1186.23 1111.29 1144.37V938.611C1111.29 895.231 1116.84 857.661 1127.94 825.891C1139.03 794.121 1157.94 769.661 1184.67 752.511C1211.91 734.861 1248.72 726.031 1295.12 726.031C1340.51 726.031 1376.07 733.601 1401.79 748.731C1428.01 763.861 1446.67 784.791 1457.77 811.521C1468.86 838.251 1474.41 869.511 1474.41 905.321V944.661H1342.02V894.731C1342.02 881.621 1341.01 869.511 1339 858.421C1337.48 847.321 1333.45 838.501 1326.89 831.941C1320.84 824.881 1310.76 821.351 1296.63 821.351C1282.01 821.351 1271.42 825.381 1264.86 833.451C1258.3 841.021 1254.02 850.601 1252 862.201C1250.49 873.801 1249.73 885.901 1249.73 898.511V1182.2C1249.73 1195.81 1250.99 1208.67 1253.51 1220.78C1256.54 1232.38 1261.58 1241.96 1268.64 1249.52C1276.21 1256.59 1286.8 1260.12 1300.42 1260.12C1314.54 1260.12 1325.38 1256.33 1332.95 1248.77C1340.51 1241.2 1345.81 1231.37 1348.83 1219.27C1351.86 1207.16 1353.37 1194.3 1353.37 1180.68V1108.82H1298.15V1029.39H1475.17V1347.11H1385.9L1378.34 1296.43C1370.27 1313.57 1358.41 1327.95 1342.78 1339.55C1327.15 1350.64 1305.96 1356.19 1279.23 1356.19Z" fill="black"/>
						<path d="M1458.14 1347.11V734.352H1553.45L1679.03 1029.39V734.352H1790.99V1347.11H1699.46L1573.88 1029.39V1347.11H1458.14Z" fill="black"/>
						<path d="M1800.45 1347.11V734.352H2075.81V826.652H1935.86V978.702H2042.52V1072.51H1935.86V1255.58H2077.32V1347.11H1800.45Z" fill="black"/>
						<path d="M2055.77 1347.11V734.352H2224.47C2265.82 734.352 2301.63 738.892 2331.89 747.972C2362.15 757.052 2385.6 773.442 2402.24 797.142C2419.39 820.342 2427.97 853.382 2427.97 896.242C2427.97 921.462 2425.95 943.902 2421.91 963.572C2417.88 983.242 2410.31 1000.39 2399.22 1015.01C2388.63 1029.13 2373.25 1040.99 2353.07 1050.57L2437.04 1347.11H2297.09L2229.76 1072.51H2191.18V1347.11H2055.77ZM2191.18 994.592H2229.01C2248.17 994.592 2263.05 991.312 2273.64 984.752C2284.23 977.692 2291.54 967.862 2295.58 955.252C2300.12 942.142 2302.39 926.502 2302.39 908.352C2302.39 882.122 2297.6 861.702 2288.01 847.072C2278.43 832.452 2260.78 825.132 2235.06 825.132H2191.18V994.592Z" fill="black"/>
						<path d="M2560.72 1356.19C2522.39 1356.19 2490.36 1349.38 2464.64 1335.76C2438.92 1322.15 2419.51 1301.22 2406.39 1272.98C2393.28 1244.23 2385.97 1207.16 2384.45 1161.77L2500.2 1144.37C2500.7 1170.6 2502.97 1191.78 2507.01 1207.92C2511.55 1224.06 2517.6 1235.66 2525.16 1242.72C2533.23 1249.78 2542.81 1253.31 2553.91 1253.31C2568.03 1253.31 2577.11 1248.52 2581.14 1238.93C2585.68 1229.35 2587.95 1219.27 2587.95 1208.67C2587.95 1183.46 2581.9 1162.28 2569.8 1145.13C2557.69 1127.48 2541.3 1109.83 2520.62 1092.17L2467.67 1046.03C2444.47 1026.36 2424.8 1004.17 2408.66 979.461C2393.03 954.241 2385.21 923.221 2385.21 886.411C2385.21 834.461 2400.59 794.871 2431.36 767.641C2462.12 739.901 2503.98 726.031 2556.94 726.031C2589.72 726.031 2615.94 731.581 2635.61 742.681C2655.78 753.771 2670.91 768.401 2681 786.551C2691.59 804.201 2698.65 823.121 2702.18 843.291C2706.22 862.961 2708.49 881.871 2708.99 900.031L2592.49 914.401C2591.99 896.241 2590.73 880.611 2588.71 867.501C2587.19 853.881 2583.66 843.541 2578.12 836.481C2572.57 828.921 2564 825.131 2552.4 825.131C2539.79 825.131 2530.46 830.431 2524.41 841.021C2518.86 851.611 2516.08 862.201 2516.08 872.791C2516.08 895.491 2521.38 914.151 2531.97 928.771C2543.07 942.891 2557.44 957.771 2575.09 973.411L2625.78 1018.04C2652.51 1040.73 2674.95 1066.45 2693.1 1095.2C2711.76 1123.95 2721.09 1159.5 2721.09 1201.87C2721.09 1230.61 2714.54 1256.84 2701.43 1280.54C2688.31 1303.74 2669.65 1322.15 2645.44 1335.76C2621.74 1349.38 2593.5 1356.19 2560.72 1356.19Z" fill="black"/>
						<path d="M5.53516 683.137V9.14844H181.105C209.951 9.14844 237.132 11.3674 262.649 15.8044C288.721 20.2424 311.742 28.8414 331.713 41.5994C351.683 53.8034 367.215 71.5544 378.309 94.8534C389.958 117.596 395.783 147.829 395.783 185.55C395.783 212.731 391.623 235.752 383.302 254.613C375.536 272.919 364.164 287.619 349.186 298.713C334.763 309.808 317.29 317.297 296.765 321.18C322.837 324.508 344.749 333.106 362.5 346.974C380.251 360.288 393.564 378.316 402.44 401.06C411.87 423.804 416.585 451.262 416.585 483.436C416.585 518.384 411.87 548.616 402.44 574.134C393.564 599.096 380.528 619.621 363.332 635.708C346.135 651.795 324.778 663.721 299.261 671.488C274.299 679.254 245.453 683.137 212.724 683.137H5.53516ZM154.478 579.126H186.098C218.826 579.126 241.293 570.805 253.496 554.164C266.255 537.522 272.634 513.114 272.634 480.94C272.634 455.423 269.861 435.175 264.314 420.198C258.766 405.22 249.613 394.403 236.855 387.747C224.096 380.535 206.9 376.929 185.266 376.929H154.478V579.126ZM154.478 278.743H183.601C206.345 278.743 223.541 275.415 235.191 268.758C246.84 261.547 254.606 251.285 258.489 237.971C262.927 224.658 265.146 208.571 265.146 189.71C265.146 171.959 261.817 157.259 255.161 145.61C249.059 133.406 239.628 124.253 226.87 118.151C214.666 112.049 199.134 108.998 180.273 108.998H154.478V278.743Z" fill="black"/>
						<path d="M610.044 693.129C558.455 693.129 517.96 684.809 488.559 668.167C459.714 650.971 439.466 626.285 427.817 594.112C416.168 561.383 410.343 521.443 410.343 474.291V9.15625H557.622V496.758C557.622 510.626 558.732 524.494 560.951 538.362C563.17 552.23 567.885 563.602 575.096 572.477C582.862 581.353 594.512 585.791 610.044 585.791C626.131 585.791 637.78 581.353 644.991 572.477C652.203 563.602 656.641 552.23 658.305 538.362C660.524 524.494 661.633 510.626 661.633 496.758V9.15625H809.744V474.291C809.744 521.443 803.642 561.383 791.438 594.112C779.789 626.285 759.542 650.971 730.696 668.167C701.851 684.809 661.633 693.129 610.044 693.129Z" fill="black"/>
						<path d="M987.391 693.126C945.241 693.126 910.011 685.638 881.721 670.66C853.43 655.683 832.073 632.662 817.65 601.597C803.227 569.978 795.184 529.206 793.52 479.281L920.831 460.143C921.381 488.988 923.88 512.287 928.32 530.038C933.31 547.789 939.971 560.548 948.291 568.314C957.161 576.08 967.701 579.963 979.911 579.963C995.441 579.963 1005.42 574.693 1009.86 564.153C1014.85 553.614 1017.35 542.519 1017.35 530.87C1017.35 503.134 1010.69 479.835 997.381 460.975C984.071 441.56 966.041 422.144 943.291 402.729L885.05 351.972C859.531 330.338 837.897 305.93 820.146 278.748C802.95 251.012 794.352 216.897 794.352 176.402C794.352 119.265 811.271 75.719 845.109 45.764C878.951 15.255 924.991 0 983.231 0C1019.29 0 1048.14 6.102 1069.77 18.306C1091.96 30.509 1108.6 46.596 1119.7 66.566C1131.35 85.982 1139.11 106.784 1142.99 128.973C1147.43 150.607 1149.93 171.409 1150.48 191.379L1022.34 207.189C1021.79 187.219 1020.4 170.022 1018.18 155.6C1016.52 140.622 1012.63 129.25 1006.53 121.484C1000.43 113.163 991.001 109.003 978.241 109.003C964.371 109.003 954.111 114.827 947.451 126.477C941.351 138.126 938.3 149.775 938.3 161.424C938.3 186.387 944.131 206.912 955.781 222.999C967.981 238.531 983.791 254.895 1003.2 272.092L1058.95 321.185C1088.35 346.147 1113.04 374.438 1133.01 406.057C1153.53 437.676 1163.8 476.784 1163.8 523.381C1163.8 555.001 1156.59 583.846 1142.16 609.918C1127.74 635.435 1107.21 655.683 1080.59 670.66C1054.52 685.638 1023.45 693.126 987.391 693.126Z" fill="black"/>
						<path d="M1167.13 683.145V9.15625H1316.07V683.145H1167.13Z" fill="black"/>
						<path d="M1330.25 682.786V8.79688H1435.09L1573.22 333.31V8.79688H1696.37V682.786H1595.69L1457.56 333.31V682.786H1330.25Z" fill="black"/>
						<path d="M1705.07 683.145V9.15625H2007.95V110.67H1854.02V277.919H1971.34V381.098H1854.02V582.462H2009.62V683.145H1705.07Z" fill="black"/>
						<path d="M2185.59 693.126C2143.43 693.126 2108.21 685.638 2079.92 670.66C2051.63 655.683 2030.27 632.662 2015.85 601.597C2001.43 569.978 1993.38 529.206 1991.72 479.281L2119.03 460.143C2119.58 488.988 2122.08 512.287 2126.52 530.038C2131.51 547.789 2138.16 560.548 2146.49 568.314C2155.36 576.08 2165.9 579.963 2178.1 579.963C2193.64 579.963 2203.62 574.693 2208.06 564.153C2213.05 553.614 2215.55 542.519 2215.55 530.87C2215.55 503.134 2208.89 479.835 2195.58 460.975C2182.27 441.56 2164.24 422.144 2141.49 402.729L2083.25 351.972C2057.73 330.338 2036.1 305.93 2018.34 278.748C2001.15 251.012 1992.55 216.897 1992.55 176.402C1992.55 119.265 2009.47 75.719 2043.31 45.764C2077.15 15.255 2123.19 0 2181.43 0C2217.49 0 2246.34 6.102 2267.97 18.306C2290.16 30.509 2306.8 46.596 2317.9 66.566C2329.54 85.982 2337.31 106.784 2341.19 128.973C2345.63 150.607 2348.13 171.409 2348.68 191.379L2220.54 207.189C2219.99 187.219 2218.6 170.022 2216.38 155.6C2214.72 140.622 2210.83 129.25 2204.73 121.484C2198.63 113.163 2189.2 109.003 2176.44 109.003C2162.57 109.003 2152.31 114.827 2145.65 126.477C2139.55 138.126 2136.5 149.775 2136.5 161.424C2136.5 186.387 2142.33 206.912 2153.97 222.999C2166.18 238.531 2181.99 254.895 2201.4 272.092L2257.15 321.185C2286.55 346.147 2311.24 374.438 2331.21 406.057C2351.73 437.676 2362 476.784 2362 523.381C2362 555.001 2354.78 583.846 2340.36 609.918C2325.94 635.435 2305.41 655.683 2278.79 670.66C2252.72 685.638 2221.65 693.126 2185.59 693.126Z" fill="black"/>
						<path d="M2541.32 693.126C2499.16 693.126 2463.94 685.638 2435.65 670.66C2407.35 655.683 2386 632.662 2371.57 601.597C2357.15 569.978 2349.11 529.206 2347.44 479.281L2474.75 460.143C2475.31 488.988 2477.8 512.287 2482.24 530.038C2487.23 547.789 2493.89 560.548 2502.21 568.314C2511.09 576.08 2521.63 579.963 2533.83 579.963C2549.36 579.963 2559.35 574.693 2563.79 564.153C2568.78 553.614 2571.28 542.519 2571.28 530.87C2571.28 503.134 2564.62 479.835 2551.31 460.975C2537.99 441.56 2519.96 422.144 2497.22 402.729L2438.97 351.972C2413.46 330.338 2391.82 305.93 2374.07 278.748C2356.87 251.012 2348.28 216.897 2348.28 176.402C2348.28 119.265 2365.2 75.719 2399.03 45.764C2432.87 15.255 2478.91 0 2537.16 0C2573.22 0 2602.06 6.102 2623.7 18.306C2645.89 30.509 2662.53 46.596 2673.62 66.566C2685.27 85.982 2693.04 106.784 2696.92 128.973C2701.36 150.607 2703.85 171.409 2704.41 191.379L2576.27 207.189C2575.71 187.219 2574.33 170.022 2572.11 155.6C2570.44 140.622 2566.56 129.25 2560.46 121.484C2554.36 113.163 2544.93 109.003 2532.17 109.003C2518.3 109.003 2508.04 114.827 2501.38 126.477C2495.28 138.126 2492.23 149.775 2492.23 161.424C2492.23 186.387 2498.05 206.912 2509.7 222.999C2521.9 238.531 2537.71 254.895 2557.13 272.092L2612.88 321.185C2642.28 346.147 2666.97 374.438 2686.94 406.057C2707.46 437.676 2717.72 476.784 2717.72 523.381C2717.72 555.001 2710.51 583.846 2696.09 609.918C2681.67 635.435 2661.14 655.683 2634.51 670.66C2608.44 685.638 2577.38 693.126 2541.32 693.126Z" fill="black"/>
					</svg>
				</div>
			</div>
        </section>
    );
}
